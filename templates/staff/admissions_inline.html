{% extends 'base.html' %}
{% load inline_tags %}

{% block title %}Admissions — Inline Editor{% endblock %}

{% block content %}
<div class="lg:col-span-12 space-y-5">
    {% csrf_token %}

    <!-- ═══════ PAGE HEADER ═══════ -->
    <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
        <div>
            <h1 class="text-2xl font-bold text-gray-900 tracking-tight">Admissions Editor</h1>
            <p class="text-sm text-gray-500 mt-0.5">Click any cell to edit · Changes save automatically</p>
        </div>
        <div class="flex items-center gap-2 text-sm">
            <span
                class="inline-flex items-center gap-1 px-2.5 py-1 rounded-full bg-emerald-50 text-emerald-700 font-medium border border-emerald-200">
                <span class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></span>
                Live Editing
            </span>
            <span class="px-2.5 py-1 rounded-full bg-gray-100 text-gray-600 font-medium border border-gray-200">
                {{ page_obj.paginator.count }} record{{ page_obj.paginator.count|pluralize }}
            </span>
        </div>
    </div>

    <!-- ═══════ FILTER BAR ═══════ -->
    <form method="get" id="filterForm" class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
        <!-- Toggle button -->
        <button type="button" onclick="toggleFilters()"
            class="w-full flex items-center justify-between px-5 py-3 bg-gray-50 hover:bg-gray-100 transition text-sm font-semibold text-gray-700"
            style="border-radius:0;background:rgb(249 250 251);">
            <span class="flex items-center gap-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
                </svg>
                Filters &amp; Search
            </span>
            <svg id="filterChevron" class="w-5 h-5 transition-transform" fill="none" stroke="currentColor"
                viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
        </button>

        <div id="filterPanel" class="hidden px-5 py-4 space-y-4">
            <!-- Row 1: Search + Level + Board + Community -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3">
                <div>
                    <label class="block text-xs font-semibold text-gray-500 mb-1">Search</label>
                    <input type="text" name="search" value="{{ search_query }}" placeholder="Name, email, application #"
                        class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/30 focus:border-primary outline-none">
                </div>
                <div>
                    <label class="block text-xs font-semibold text-gray-500 mb-1">Level</label>
                    <select name="level"
                        class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/30 focus:border-primary outline-none bg-white">
                        <option value="">All Levels</option>
                        <option value="UG" {% if level_filter == 'UG' %}selected{% endif %}>UG</option>
                        <option value="PG" {% if level_filter == 'PG' %}selected{% endif %}>PG</option>
                    </select>
                </div>
                <div>
                    <label class="block text-xs font-semibold text-gray-500 mb-1">Board</label>
                    <select name="board"
                        class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/30 focus:border-primary outline-none bg-white">
                        <option value="">All Boards</option>
                        <option value="State Board" {% if board_filter == 'State Board' %}selected{% endif %}>State Board
                        </option>
                        <option value="CBSE" {% if board_filter == 'CBSE' %}selected{% endif %}>CBSE</option>
                        <option value="ICSE" {% if board_filter == 'ICSE' %}selected{% endif %}>ICSE</option>
                        <option value="Others" {% if board_filter == 'Others' %}selected{% endif %}>Others</option>
                    </select>
                </div>
                <div>
                    <label class="block text-xs font-semibold text-gray-500 mb-1">Community</label>
                    <select name="community"
                        class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/30 focus:border-primary outline-none bg-white">
                        <option value="">All Communities</option>
                        <option value="OC" {% if community_filter == 'OC' %}selected{% endif %}>OC</option>
                        <option value="BC" {% if community_filter == 'BC' %}selected{% endif %}>BC</option>
                        <option value="MBC" {% if community_filter == 'MBC' %}selected{% endif %}>MBC</option>
                        <option value="SC" {% if community_filter == 'SC' %}selected{% endif %}>SC</option>
                        <option value="ST" {% if community_filter == 'ST' %}selected{% endif %}>ST</option>
                    </select>
                </div>
            </div>

            <!-- Row 2: Country / State / District / Accommodation -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3">
                <div>
                    <label class="block text-xs font-semibold text-gray-500 mb-1">Country</label>
                    <select name="country_filter" id="countrySelect"
                        onchange="document.getElementById('filterForm').submit()"
                        class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/30 focus:border-primary outline-none bg-white">
                        <option value="">All Countries</option>
                        <option value="India" {% if country_filter == 'India' %}selected{% endif %}>India</option>
                        <option value="Others" {% if country_filter == 'Others' %}selected{% endif %}>Others</option>
                    </select>
                </div>
                <div>
                    <label class="block text-xs font-semibold text-gray-500 mb-1">State</label>
                    <select name="state_filter"
                        class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg outline-none bg-white {% if country_filter    !=    'India' %}opacity-50{% endif %}"
                        {% if country_filter  != 'India' %}disabled{% endif %}>
                        <option value="">All States</option>
                        {% for s in states %}
                        <option value="{{ s }}" {% if state_filter == s %}selected{% endif %}>{{ s }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <label class="block text-xs font-semibold text-gray-500 mb-1">District</label>
                    <select name="district_filter"
                        class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg outline-none bg-white {% if country_filter    !=    'India' %}opacity-50{% endif %}"
                        {% if country_filter  != 'India' %}disabled{% endif %}>
                        <option value="">All Districts</option>
                        {% for d in districts %}
                        <option value="{{ d }}" {% if district_filter == d %}selected{% endif %}>{{ d }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div>
                    <label class="block text-xs font-semibold text-gray-500 mb-1">Accommodation</label>
                    <select name="accommodation_type"
                        class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/30 focus:border-primary outline-none bg-white">
                        <option value="">All</option>
                        <option value="hostel" {% if accommodation_type == 'hostel' %}selected{% endif %}>Hostel</option>
                        <option value="transport" {% if accommodation_type == 'transport' %}selected{% endif %}>Transport
                        </option>
                        <option value="not_needed" {% if accommodation_type == 'not_needed' %}selected{% endif %}>Not
                            Needed</option>
                    </select>
                </div>
            </div>

            <!-- Row 3: Cutoff range + Date range + Dept pref -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-6 gap-3">
                <div>
                    <label class="block text-xs font-semibold text-gray-500 mb-1">Cutoff From</label>
                    <input type="number" name="cutoff_from" value="{{ cutoff_from }}" step="0.01" placeholder="Min"
                        class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg outline-none">
                </div>
                <div>
                    <label class="block text-xs font-semibold text-gray-500 mb-1">Cutoff To</label>
                    <input type="number" name="cutoff_to" value="{{ cutoff_to }}" step="0.01" placeholder="Max"
                        class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg outline-none">
                </div>
                <div>
                    <label class="block text-xs font-semibold text-gray-500 mb-1">Date From</label>
                    <input type="date" name="date_from" value="{{ date_from }}"
                        class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg outline-none">
                </div>
                <div>
                    <label class="block text-xs font-semibold text-gray-500 mb-1">Date To</label>
                    <input type="date" name="date_to" value="{{ date_to }}"
                        class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg outline-none">
                </div>
                <div>
                    <label class="block text-xs font-semibold text-gray-500 mb-1">Department</label>
                    <input type="text" name="dept" value="{{ dept_filter }}" placeholder="e.g. CSE"
                        class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg outline-none">
                </div>
                <div>
                    <label class="block text-xs font-semibold text-gray-500 mb-1">Preference</label>
                    <select name="preference"
                        class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg outline-none bg-white">
                        <option value="">Any</option>
                        <option value="1" {% if pref_filter == '1' %}selected{% endif %}>1st</option>
                        <option value="2" {% if pref_filter == '2' %}selected{% endif %}>2nd</option>
                        <option value="3" {% if pref_filter == '3' %}selected{% endif %}>3rd</option>
                        <option value="3+" {% if pref_filter == '3+' %}selected{% endif %}>3+</option>
                    </select>
                </div>
            </div>

            <!-- Row 4: Sort + Actions -->
            <div class="flex flex-wrap items-end gap-3">
                <div>
                    <label class="block text-xs font-semibold text-gray-500 mb-1">Sort By</label>
                    <select name="sort"
                        class="px-3 py-2 text-sm border border-gray-300 rounded-lg outline-none bg-white">
                        <option value="-created_at" {% if sort_by == '-created_at' %}selected{% endif %}>Newest First
                        </option>
                        <option value="created_at" {% if sort_by == 'created_at' %}selected{% endif %}>Oldest First
                        </option>
                        <option value="student_name" {% if sort_by == 'student_name' %}selected{% endif %}>Name A-Z
                        </option>
                        <option value="-student_name" {% if sort_by == '-student_name' %}selected{% endif %}>Name Z-A
                        </option>
                        <option value="-cutoff_marks" {% if sort_by == '-cutoff_marks' %}selected{% endif %}>Cutoff ↓
                        </option>
                        <option value="cutoff_marks" {% if sort_by == 'cutoff_marks' %}selected{% endif %}>Cutoff ↑
                        </option>
                    </select>
                </div>
                <button type="submit" class="px-5 py-2 text-sm font-semibold rounded-lg"
                    style="background:#FF9F1C;color:#fff;">
                    Apply Filters
                </button>
                <a href="{% url 'admissions_list' %}"
                    class="px-4 py-2 text-sm font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition"
                    style="text-decoration:none;">
                    Clear All
                </a>
            </div>
        </div>
    </form>

    <!-- ═══════ TABLE ═══════ -->
    <div class="bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
        <div class="overflow-x-auto" id="tableWrapper" style="max-height:72vh;">
            <table class="min-w-full text-sm" id="admissionTable">
                <thead class="sticky top-0 z-20">
                    <tr class="bg-gradient-to-r from-gray-800 to-gray-700 text-white">
                        <th class="px-3 py-3 text-left text-xs font-bold uppercase tracking-wider whitespace-nowrap sticky left-0 bg-gray-800 z-30"
                            style="min-width:40px;">#</th>
                        {% for f in fields %}
                        <th class="px-3 py-3 text-left text-xs font-bold uppercase tracking-wider whitespace-nowrap"
                            style="min-width:130px;">
                            {{ f.verbose }}
                        </th>
                        {% endfor %}
                    </tr>
                </thead>
                <tbody class="divide-y divide-gray-100">
                    {% for admission in page_obj %}
                    <tr class="hover:bg-amber-50/40 transition-colors group" data-pk="{{ admission.pk }}">
                        <td
                            class="px-3 py-2 text-xs text-gray-400 font-mono sticky left-0 bg-white group-hover:bg-amber-50/40 z-10 border-r border-gray-100">
                            {{ forloop.counter0|add:page_obj.start_index }}
                        </td>
                        {% for f in fields %}
                        <td class="px-1 py-1 relative" data-field="{{ f.name }}" data-input-type="{{ f.input_type }}"
                            data-step="{{ f.step }}" data-class-name="{{ f.class_name }}">

                            {% if f.input_type  ==  'boolean' %}
                            <select
                                class="cell-input w-full px-2 py-1.5 text-sm border border-transparent rounded-md bg-transparent hover:border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition cursor-pointer"
                                data-pk="{{ admission.pk }}" data-field="{{ f.name }}">
                                <option value="true" {% if admission|get_field_value:f.name %}selected{% endif %}>Yes
                                </option>
                                <option value="false" {% if not admission|get_field_value:f.name %}selected{% endif %}>
                                    No</option>
                            </select>
                            {% elif f.input_type  ==  'date' %}
                            <input type="date"
                                class="cell-input w-full px-2 py-1.5 text-sm border border-transparent rounded-md bg-transparent hover:border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition"
                                value="{{ admission|get_field_value:f.name|date:'Y-m-d' }}" data-pk="{{ admission.pk }}"
                                data-field="{{ f.name }}">
                            {% elif f.input_type  ==  'datetime-local' %}
                            <input type="datetime-local"
                                class="cell-input w-full px-2 py-1.5 text-sm border border-transparent rounded-md bg-transparent hover:border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition"
                                value="{{ admission|get_field_value:f.name|date:'Y-m-d\TH:i' }}"
                                data-pk="{{ admission.pk }}" data-field="{{ f.name }}">
                            {% elif f.input_type  ==  'number' %}
                            <input type="number"
                                class="cell-input w-full px-2 py-1.5 text-sm border border-transparent rounded-md bg-transparent hover:border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition"
                                value="{{ admission|get_field_value:f.name }}" step="{{ f.step }}"
                                data-pk="{{ admission.pk }}" data-field="{{ f.name }}">
                            {% else %}
                            <input type="{{ f.input_type }}"
                                class="cell-input w-full px-2 py-1.5 text-sm border border-transparent rounded-md bg-transparent hover:border-gray-300 focus:border-primary focus:ring-2 focus:ring-primary/20 outline-none transition"
                                value="{{ admission|get_field_value:f.name }}" data-pk="{{ admission.pk }}"
                                data-field="{{ f.name }}">
                            {% endif %}

                            <!-- Save indicator -->
                            <span
                                class="save-indicator absolute -top-1 right-1 text-[10px] font-bold px-1.5 py-0.5 rounded-full opacity-0 pointer-events-none transition-opacity duration-300"></span>
                        </td>
                        {% endfor %}
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="{{ fields|length|add:1 }}" class="px-6 py-16 text-center">
                            <div class="flex flex-col items-center gap-2 text-gray-400">
                                <svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                                        d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-2.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
                                </svg>
                                <p class="text-sm font-medium">No records found</p>
                                <p class="text-xs">Try adjusting your filters</p>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- ═══════ PAGINATION ═══════ -->
    {% if page_obj.has_other_pages %}
    <nav class="flex items-center justify-between bg-white rounded-xl shadow-sm border border-gray-200 px-5 py-3">
        <p class="text-sm text-gray-500">
            Showing <span class="font-semibold text-gray-700">{{ page_obj.start_index }}</span>–<span
                class="font-semibold text-gray-700">{{ page_obj.end_index }}</span>
            of <span class="font-semibold text-gray-700">{{ page_obj.paginator.count }}</span>
        </p>
        <div class="flex items-center gap-1">
            {% if page_obj.has_previous %}
            <a href="?page=1{% for k,v in request.GET.items %}{% if k    !=    'page' %}&{{ k }}={{ v }}{% endif %}{% endfor %}"
                class="px-3 py-1.5 text-xs font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition"
                style="text-decoration:none;">«</a>
            <a href="?page={{ page_obj.previous_page_number }}{% for k,v in request.GET.items %}{% if k    !=    'page' %}&{{ k }}={{ v }}{% endif %}{% endfor %}"
                class="px-3 py-1.5 text-xs font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition"
                style="text-decoration:none;">‹ Prev</a>
            {% endif %}

            {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number  ==  num %}
            <span class="px-3 py-1.5 text-xs font-bold text-white rounded-lg" style="background:#FF9F1C;">{{ num
                }}</span>
            {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %} <a
                href="?page={{ num }}{% for k,v in request.GET.items %}{% if k    !=    'page' %}&{{ k }}={{ v }}{% endif %}{% endfor %}"
                class="px-3 py-1.5 text-xs font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition"
                style="text-decoration:none;">{{ num }}</a>
                {% endif %}
                {% endfor %}

                {% if page_obj.has_next %}
                <a href="?page={{ page_obj.next_page_number }}{% for k,v in request.GET.items %}{% if k    !=    'page' %}&{{ k }}={{ v }}{% endif %}{% endfor %}"
                    class="px-3 py-1.5 text-xs font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition"
                    style="text-decoration:none;">Next ›</a>
                <a href="?page={{ page_obj.paginator.num_pages }}{% for k,v in request.GET.items %}{% if k    !=    'page' %}&{{ k }}={{ v }}{% endif %}{% endfor %}"
                    class="px-3 py-1.5 text-xs font-medium text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition"
                    style="text-decoration:none;">»</a>
                {% endif %}
        </div>
    </nav>
    {% endif %}

</div>

<!-- ═══════ INLINE EDIT JAVASCRIPT ═══════ -->
 <script>
    (function () {
        'use strict';

        // CSRF token — try cookie first, fall back to hidden input in DOM
        function getCookie(name) {
            let v = null;
            document.cookie.split(';').forEach(c => {
                c = c.trim();
                if (c.startsWith(name + '=')) v = decodeURIComponent(c.substring(name.length + 1));
            });
            return v;
        }
        const csrfEl = document.querySelector('[name=csrfmiddlewaretoken]');
        const CSRF = getCookie('csrftoken') || (csrfEl ? csrfEl.value : '');
        const UPDATE_URL = '{% url "admissions_update" %}';

        // Track original values to only send real changes
        const originals = new Map();

        document.querySelectorAll('.cell-input').forEach(el => {
            const key = el.dataset.pk + '__' + el.dataset.field;
            originals.set(key, el.value);

            // Listen for changes
            el.addEventListener('change', () => handleSave(el));
            if (el.tagName == 'INPUT') {
                el.addEventListener('blur', () => handleSave(el));
            }

            // Keyboard: Enter to confirm & move to next row same column
            el.addEventListener('keydown', e => {
                if (e.key == 'Enter') {
                    e.preventDefault();
                    el.blur();
                    // Move to same field on next row
                    const row = el.closest('tr');
                    const nextRow = row.nextElementSibling;
                    if (nextRow) {
                        const nextInput = nextRow.querySelector(`[data-field="${el.dataset.field}"]`);
                        if (nextInput) nextInput.focus();
                    }
                }
                if (e.key == 'Escape') {
                    el.value = originals.get(key) || '';
                    el.blur();
                }
                // Tab is handled natively — moves to next cell
            });
        });

        function handleSave(el) {
            const key = el.dataset.pk + '__' + el.dataset.field;
            const current = el.value;
            if (originals.get(key) == current) return; // no change

            const td = el.closest('td');
            const indicator = td.querySelector('.save-indicator');

            // Saving state
            td.style.background = 'rgba(255,159,28,0.08)';
            indicator.textContent = '⏳';
            indicator.style.opacity = '1';
            indicator.className = indicator.className.replace(/text-\S+/g, '');
            indicator.classList.add('text-amber-600');

            const body = new FormData();
            body.append('pk', el.dataset.pk);
            body.append('field_name', el.dataset.field);
            body.append('new_value', current);

            fetch(UPDATE_URL, {
                method: 'POST',
                headers: { 'X-CSRFToken': CSRF },
                body: body,
            })
                .then(r => r.json())
                .then(data => {
                    if (data.success) {
                        originals.set(key, current);
                        td.style.background = 'rgba(34,197,94,0.08)';
                        indicator.textContent = '✓';
                        indicator.className = indicator.className.replace(/text-\S+/g, '');
                        indicator.classList.add('text-emerald-600');
                        setTimeout(() => {
                            td.style.background = '';
                            indicator.style.opacity = '0';
                        }, 1500);
                    } else {
                        showError(td, indicator, el, key, data.error || 'Save failed');
                    }
                })
                .catch(() => {
                    showError(td, indicator, el, key, 'Network error');
                });
        }

        function showError(td, indicator, el, key, msg) {
            td.style.background = 'rgba(239,68,68,0.08)';
            indicator.textContent = '✕';
            indicator.className = indicator.className.replace(/text-\S+/g, '');
            indicator.classList.add('text-red-600');
            indicator.title = msg;
            el.value = originals.get(key) || '';
            setTimeout(() => {
                td.style.background = '';
                indicator.style.opacity = '0';
            }, 3000);
        }

    })();

    // Filter panel toggle
    function toggleFilters() {
        const panel = document.getElementById('filterPanel');
        const chevron = document.getElementById('filterChevron');
        panel.classList.toggle('hidden');
        chevron.style.transform = panel.classList.contains('hidden') ? '' : 'rotate(180deg)';
    }

    // Auto-open filter panel if any filter is active
    (function () {
        const params = new URLSearchParams(window.location.search);
        const filterKeys = ['search', 'level', 'board', 'community', 'country_filter', 'state_filter', 'district_filter', 'accommodation_type', 'cutoff_from', 'cutoff_to', 'date_from', 'date_to', 'dept', 'preference'];
        for (const k of filterKeys) {
            if (params.get(k)) {
                document.getElementById('filterPanel').classList.remove('hidden');
                document.getElementById('filterChevron').style.transform = 'rotate(180deg)';
                break;
            }
        }
    })();
</script>


<style>
    /* Override base button styles inside this page */
    #filterForm button[type="button"],
    .cell-input {
        background: transparent;
        padding: 0;
        border-radius: 0.375rem;
        color: inherit;
    }

    #filterForm button[type="button"]:hover {
        background: rgb(243 244 246);
    }

    /* Table cell inputs — tighter */
    .cell-input {
        font-family: 'Poppins', sans-serif;
    }

    .cell-input:focus {
        background: white;
        box-shadow: 0 0 0 2px rgba(255, 159, 28, 0.25);
    }

    /* Smooth row alternation */
    #admissionTable tbody tr:nth-child(even) {
        background-color: rgba(249, 250, 251, 0.5);
    }

    #admissionTable tbody tr:nth-child(even):hover {
        background-color: rgba(255, 159, 28, 0.04);
    }

    /* Sticky header shadow */
    #admissionTable thead {
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
    }

    /* Save indicator animation */
    .save-indicator {
        transition: opacity 0.3s ease;
    }
</style>
{% endblock %}